---
title: Feb 18th, 2021
---

## ## TODO 11:05 一个基本的查询是这样子:
[[Project A]]
#+BEGIN_QUERY
{:title [:code "Total time"]
:query [:find (sum ?spent-min)
                          :where
                          [?rp :page/name "project a"]
                          [?p :block/ref-pages ?rp]
                          [?p :block/children ?b]
                          [?b :block/marker ?m]
                          [(contains? #{"" "DONE"} ?m)]
                          [?b :block/properties ?prop]
                          [(get ?prop "todo") ?todo]
                          [(get ?prop "done") ?done]
                          [(- ?done ?todo) ?spent]
                          [(/ ?spent 60000) ?spent-min]]}
#+END_QUERY
